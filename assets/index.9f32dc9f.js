(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))u(t);new MutationObserver(t=>{for(const c of t)if(c.type==="childList")for(const r of c.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&u(r)}).observe(document,{childList:!0,subtree:!0});function o(t){const c={};return t.integrity&&(c.integrity=t.integrity),t.referrerpolicy&&(c.referrerPolicy=t.referrerpolicy),t.crossorigin==="use-credentials"?c.credentials="include":t.crossorigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function u(t){if(t.ep)return;t.ep=!0;const c=o(t);fetch(t.href,c)}})();let n=JSON.parse(localStorage.getItem("todos"))||[];const S=document.querySelector("#new-todo-form"),y=document.querySelector("#name"),T=localStorage.getItem("username")||"",b=document.querySelector("#completed");b.addEventListener("click",I);const k=document.querySelector("#active");k.addEventListener("click",H);const C=document.querySelector("#all");C.addEventListener("click",M);const L=document.querySelector("#todo-list");window.addEventListener("load",()=>{y.value=T.toUpperCase(),y.addEventListener("change",e=>{localStorage.setItem("username",e.target.value+"!")}),S.addEventListener("submit",d);function d(e){e.preventDefault();const o={content:e.target.elements.content.value,dueDate:e.target.elements.dueDate.value,category:e.target.elements.category.value,done:!1,createdAt:new Date().getTime()};n.push(o),localStorage.setItem("todos",JSON.stringify(n)),e.target.reset(),i(n),s(n)}i(n),s(n)});function i(d){L.innerHTML="",d.forEach(e=>{const o=document.createElement("div");o.classList.add("todo-item");const u=document.createElement("label"),t=document.createElement("input"),c=document.createElement("div"),r=document.createElement("div"),l=document.createElement("div"),m=document.createElement("div"),p=document.createElement("button"),f=document.createElement("button");t.type="checkbox",t.checked=e.done,e.category=="personal"&&(l.innerHTML='<img src="public/icon-personal.png"/>'),e.category=="kids"&&(l.innerHTML='<img src="public/icon-kids.png"/>'),e.category=="job"&&(l.innerHTML='<img src="public/icon-job.png"/>'),e.category=="other"&&(l.innerHTML='<img src="public/icon-other.png"/>'),c.classList.add("todo-content"),r.classList.add("duedate-div"),l.classList.add("category-icon"),m.classList.add("actions"),p.classList.add("edit"),f.classList.add("delete"),r.innerHTML=e.dueDate,c.innerHTML=`<input type="text" value="${e.content}" readonly>`,p.innerHTML="Edit",f.innerHTML="Delete",u.appendChild(t),o.appendChild(u),o.appendChild(c),o.appendChild(r),o.appendChild(l),o.appendChild(m),m.appendChild(p),m.appendChild(f),L.appendChild(o),e.done&&o.classList.add("done"),t.addEventListener("click",g=>{e.done=g.target.checked,localStorage.setItem("arr",JSON.stringify(d)),e.done?o.classList.add("done"):o.classList.remove("done"),i(n),s(n)}),p.addEventListener("click",v);function v(g){const a=c.querySelector("input");a.removeAttribute("readonly"),a.focus(),a.addEventListener("blur",E=>{a.setAttribute("readonly",!0),e.content=E.target.value,localStorage.setItem("todos",JSON.stringify(n)),i(n)})}f.addEventListener("click",h);function h(g){n=n.filter(a=>a!=e),localStorage.setItem("todos",JSON.stringify(n)),i(n),s(n)}})}function M(){i(n),s(n)}function H(){const d=n.filter(e=>e.done==!1);i(d),s(d)}function I(){const d=n.filter(e=>e.done==!0);i(d),s(d)}function s(d){const e=document.querySelector("#items-left"),o=d.length===1?"todo":"todos";e.innerHTML=`${d.length} ${o}`}console.table(n);
