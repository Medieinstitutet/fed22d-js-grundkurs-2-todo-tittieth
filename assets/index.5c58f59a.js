(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))d(t);new MutationObserver(t=>{for(const n of t)if(n.type==="childList")for(const c of n.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&d(c)}).observe(document,{childList:!0,subtree:!0});function o(t){const n={};return t.integrity&&(n.integrity=t.integrity),t.referrerpolicy&&(n.referrerPolicy=t.referrerpolicy),t.crossorigin==="use-credentials"?n.credentials="include":t.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function d(t){if(t.ep)return;t.ep=!0;const n=o(t);fetch(t.href,n)}})();let r=JSON.parse(localStorage.getItem("todos"))||[];JSON.parse(localStorage.getItem("activeTodos"));let h=JSON.parse(localStorage.getItem("completedTodos"))||[];const S=document.querySelector("#new-todo-form"),f=document.querySelector("#name"),b=localStorage.getItem("username")||"";window.addEventListener("load",()=>{f.value=b.toUpperCase(),f.addEventListener("change",e=>{localStorage.setItem("username",e.target.value+"!")}),S.addEventListener("submit",a);function a(e){e.preventDefault();const o={content:e.target.elements.content.value,dueDate:e.target.elements.dueDate.value,category:e.target.elements.category.value,done:!1,createdAt:new Date().getTime()};r.push(o),localStorage.setItem("todos",JSON.stringify(r)),e.target.reset(),l()}l()});function l(){const a=document.querySelector("#todo-list");a.innerHTML="",r.forEach(e=>{const o=document.createElement("div");o.classList.add("todo-item");const d=document.createElement("label"),t=document.createElement("input"),n=document.createElement("div"),c=document.createElement("div"),i=document.createElement("div"),u=document.createElement("div"),m=document.createElement("button"),p=document.createElement("button");t.type="checkbox",t.checked=e.done,e.category=="personal"&&(i.innerHTML='<img src="public/icon-personal.png"/>'),e.category=="kids"&&(i.innerHTML='<img src="public/icon-kids.png"/>'),e.category=="job"&&(i.innerHTML='<img src="public/icon-job.png"/>'),e.category=="other"&&(i.innerHTML='<img src="public/icon-other.png"/>'),n.classList.add("todo-content"),c.classList.add("dueDate-div"),i.classList.add("category-icon"),u.classList.add("actions"),m.classList.add("edit"),p.classList.add("delete"),c.innerHTML=e.dueDate,n.innerHTML=`<input type="text" value="${e.content}" readonly>`,m.innerHTML="Edit",p.innerHTML="Delete",d.appendChild(t),o.appendChild(d),o.appendChild(n),o.appendChild(c),o.appendChild(i),o.appendChild(u),u.appendChild(m),u.appendChild(p),a.appendChild(o),e.done&&o.classList.add("done"),t.addEventListener("click",g=>{e.done=g.target.checked,localStorage.setItem("todos",JSON.stringify(r)),e.done?o.classList.add("done"):o.classList.remove("done"),l()}),m.addEventListener("click",y);function y(g){const s=n.querySelector("input");s.removeAttribute("readonly"),s.focus(),s.addEventListener("blur",v=>{s.setAttribute("readonly",!0),e.content=v.target.value,localStorage.setItem("todos",JSON.stringify(r)),l()})}p.addEventListener("click",L);function L(g){r=r.filter(s=>s!=e),localStorage.setItem("todos",JSON.stringify(r)),l()}})}console.table(r);console.table(h);
