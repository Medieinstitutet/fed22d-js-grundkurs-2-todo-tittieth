(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))d(c);new MutationObserver(c=>{for(const r of c)if(r.type==="childList")for(const i of r.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&d(i)}).observe(document,{childList:!0,subtree:!0});function o(c){const r={};return c.integrity&&(r.integrity=c.integrity),c.referrerpolicy&&(r.referrerPolicy=c.referrerpolicy),c.crossorigin==="use-credentials"?r.credentials="include":c.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function d(c){if(c.ep)return;c.ep=!0;const r=o(c);fetch(c.href,r)}})();let n=JSON.parse(localStorage.getItem("todos"))||[];const M=document.querySelector("#new-todo-form"),h=document.querySelector("#name"),k=localStorage.getItem("username")||"",v=new Date,g=v.getMonth()+1,w=v.getUTCFullYear()-0,y=v.getDate(),I=document.querySelector("#completed");I.addEventListener("click",$);const q=document.querySelector("#active");q.addEventListener("click",P);const A=document.querySelector("#all");A.addEventListener("click",F);const E=document.querySelector("#todo-list");window.addEventListener("load",()=>{h.value=k.toUpperCase(),h.addEventListener("change",o=>{localStorage.setItem("username",o.target.value+"!")});function t(){g<10&&(g="0"+g),y<10&&(y="0"+y);var o=w+"-"+g+"-"+y;document.getElementById("due-date-input").setAttribute("min",o)}t(),M.addEventListener("submit",e);function e(o){o.preventDefault();const d={content:o.target.elements.content.value,dueDate:o.target.elements.dueDate.value,category:o.target.elements.category.value,done:!1,createdAt:new Date().getTime()};n.push(d),localStorage.setItem("todos",JSON.stringify(n)),o.target.reset(),s(n),u(n)}s(n),u(n)});function T(){n.sort((t,e)=>t.done>e.done)}function H(){n.sort((t,e)=>t.dueDate>e.dueDate)}function N(){n.sort((t,e)=>t.createdAt>e.createdAt)}function O(){n.sort((t,e)=>t.content>e.content)}function B(){n.sort((t,e)=>t.category>e.category)}const S=document.querySelector("#sort");S.addEventListener("change",J);function J(){const t=S.value;t==="name"?O():t==="added-date"?N():t==="due-date"?H():t==="category"&&B(),s(n)}function s(t){E.innerHTML="",t.forEach(e=>{const o=document.createElement("div");o.classList.add("todo-item");const d=document.createElement("label"),c=document.createElement("input"),r=document.createElement("div"),i=document.createElement("div"),a=document.createElement("div"),m=document.createElement("div"),f=document.createElement("button"),p=document.createElement("button");c.type="checkbox",c.checked=e.done,e.category=="personal"&&(a.innerHTML='<img src="public/icon-personal.png"/>'),e.category=="kids"&&(a.innerHTML='<img src="public/icon-kids.png"/>'),e.category=="job"&&(a.innerHTML='<img src="public/icon-job.png"/>'),e.category=="other"&&(a.innerHTML='<img src="public/icon-other.png"/>'),r.classList.add("todo-content"),i.classList.add("duedate-div"),a.classList.add("category-icon"),m.classList.add("actions"),f.classList.add("edit"),p.classList.add("delete"),i.innerHTML=e.dueDate,r.innerHTML=`<input type="text" value="${e.content}" readonly>`,f.innerHTML="Edit",p.innerHTML="Delete",d.appendChild(c),o.appendChild(d),o.appendChild(r),o.appendChild(i),o.appendChild(a),o.appendChild(m),m.appendChild(f),m.appendChild(p),E.appendChild(o),c.addEventListener("click",L=>{e.done=L.target.checked,T(),s(n),localStorage.setItem("todos",JSON.stringify(n)),e.done?o.classList.add("done"):o.classList.remove("done")}),f.addEventListener("click",b);function b(L){const l=r.querySelector("input");l.removeAttribute("readonly"),l.focus(),l.addEventListener("blur",C=>{l.setAttribute("readonly",!0),e.content=C.target.value,localStorage.setItem("todos",JSON.stringify(n))})}p.addEventListener("click",D);function D(L){n=n.filter(l=>l!=e),localStorage.setItem("todos",JSON.stringify(n)),s(n),u(n)}})}function F(){s(n),u(n)}function P(){const t=n.filter(e=>e.done==!1);s(t),u(t)}function $(){const t=n.filter(e=>e.done==!0);s(t),u(t)}function u(t){const e=document.querySelector("#items-left"),o=t.length===1?"todo":"todos";e.innerHTML=`${t.length} ${o}`}T();console.table(n);
