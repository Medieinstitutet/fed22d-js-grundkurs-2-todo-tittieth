(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))r(t);new MutationObserver(t=>{for(const o of t)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function d(t){const o={};return t.integrity&&(o.integrity=t.integrity),t.referrerpolicy&&(o.referrerPolicy=t.referrerpolicy),t.crossorigin==="use-credentials"?o.credentials="include":t.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(t){if(t.ep)return;t.ep=!0;const o=d(t);fetch(t.href,o)}})();let c=JSON.parse(localStorage.getItem("todos"))||[];const b=document.querySelector("#new-todo-form"),v=document.querySelector("#name"),T=localStorage.getItem("username")||"",S=c.filter(n=>n.done==!0);window.addEventListener("load",()=>{v.value=T.toUpperCase(),v.addEventListener("change",e=>{localStorage.setItem("username",e.target.value+"!")}),b.addEventListener("submit",n);function n(e){e.preventDefault();const d={content:e.target.elements.content.value,dueDate:e.target.elements.dueDate.value,category:e.target.elements.category.value,done:!1,createdAt:new Date().getTime()};c.push(d),localStorage.setItem("todos",JSON.stringify(c)),e.target.reset(),p(),g()}p(),g()});const C=document.querySelector("#completed");C.addEventListener("click",M);const y=document.querySelector("#todo-list");function p(){y.innerHTML="",c.forEach(n=>{const e=document.createElement("div");e.classList.add("todo-item");const d=document.createElement("label"),r=document.createElement("input"),t=document.createElement("div"),o=document.createElement("div"),i=document.createElement("div"),s=document.createElement("div"),l=document.createElement("button"),u=document.createElement("button");r.type="checkbox",r.checked=n.done,n.category=="personal"&&(i.innerHTML='<img src="public/icon-personal.png"/>'),n.category=="kids"&&(i.innerHTML='<img src="public/icon-kids.png"/>'),n.category=="job"&&(i.innerHTML='<img src="public/icon-job.png"/>'),n.category=="other"&&(i.innerHTML='<img src="public/icon-other.png"/>'),t.classList.add("todo-content"),o.classList.add("duedate-div"),i.classList.add("category-icon"),s.classList.add("actions"),l.classList.add("edit"),u.classList.add("delete"),o.innerHTML=n.dueDate,t.innerHTML=`<input type="text" value="${n.content}" readonly>`,l.innerHTML="Edit",u.innerHTML="Delete",d.appendChild(r),e.appendChild(d),e.appendChild(t),e.appendChild(o),e.appendChild(i),e.appendChild(s),s.appendChild(l),s.appendChild(u),y.appendChild(e),n.done&&e.classList.add("done"),r.addEventListener("click",L=>{n.done=L.target.checked,localStorage.setItem("todos",JSON.stringify(c)),n.done?e.classList.add("done"):e.classList.remove("done"),p(),g()}),l.addEventListener("click",f);function f(L){const a=t.querySelector("input");a.removeAttribute("readonly"),a.focus(),a.addEventListener("blur",m=>{a.setAttribute("readonly",!0),n.content=m.target.value,localStorage.setItem("todos",JSON.stringify(c)),p()})}u.addEventListener("click",h);function h(L){c=c.filter(a=>a!=n),localStorage.setItem("todos",JSON.stringify(c)),p(),g()}})}function M(){const n=c.filter(e=>e.done==!0);y.innerHTML="",n.forEach(e=>{const d=document.createElement("div");d.classList.add("todo-item");const r=document.createElement("label"),t=document.createElement("input"),o=document.createElement("div"),i=document.createElement("div"),s=document.createElement("div"),l=document.createElement("div"),u=document.createElement("button"),f=document.createElement("button");t.type="checkbox",t.checked=e.done,e.category=="personal"&&(s.innerHTML='<img src="public/icon-personal.png"/>'),e.category=="kids"&&(s.innerHTML='<img src="public/icon-kids.png"/>'),e.category=="job"&&(s.innerHTML='<img src="public/icon-job.png"/>'),e.category=="other"&&(s.innerHTML='<img src="public/icon-other.png"/>'),o.classList.add("todo-content"),i.classList.add("duedate-div"),s.classList.add("category-icon"),l.classList.add("actions"),u.classList.add("edit"),f.classList.add("delete"),i.innerHTML=e.dueDate,o.innerHTML=`<input type="text" value="${e.content}" readonly>`,u.innerHTML="Edit",f.innerHTML="Delete",r.appendChild(t),d.appendChild(r),d.appendChild(o),d.appendChild(i),d.appendChild(s),d.appendChild(l),l.appendChild(u),l.appendChild(f),y.appendChild(d),e.done&&d.classList.add("done"),t.addEventListener("click",a=>{e.done=a.target.checked,localStorage.setItem("todos",JSON.stringify(c)),e.done?d.classList.add("done"):d.classList.remove("done"),p(),g()}),u.addEventListener("click",h);function h(a){const m=o.querySelector("input");m.removeAttribute("readonly"),m.focus(),m.addEventListener("blur",E=>{m.setAttribute("readonly",!0),e.content=E.target.value,localStorage.setItem("todos",JSON.stringify(c)),p()})}f.addEventListener("click",L);function L(a){c=c.filter(m=>m!=e),localStorage.setItem("todos",JSON.stringify(c)),p(),g()}})}function g(){const n=document.querySelector("#items-left"),e=c.length===1?"todo":"todos";n.innerHTML=`${c.length} ${e}`}g();console.table(S);console.table(c);
