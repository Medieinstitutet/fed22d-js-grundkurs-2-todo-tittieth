(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))d(c);new MutationObserver(c=>{for(const r of c)if(r.type==="childList")for(const i of r.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&d(i)}).observe(document,{childList:!0,subtree:!0});function o(c){const r={};return c.integrity&&(r.integrity=c.integrity),c.referrerpolicy&&(r.referrerPolicy=c.referrerpolicy),c.crossorigin==="use-credentials"?r.credentials="include":c.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function d(c){if(c.ep)return;c.ep=!0;const r=o(c);fetch(c.href,r)}})();let t=JSON.parse(localStorage.getItem("todos"))||[];const k=document.querySelector("#new-todo-form"),h=document.querySelector("#name"),A=localStorage.getItem("username")||"",v=new Date,p=v.getMonth()+1,I=v.getUTCFullYear()-0,y=v.getDate(),E=document.querySelector("#sort"),M=document.querySelector("#completed"),q=document.querySelector("#active"),N=document.querySelector("#all"),O=document.querySelector("#clear-all"),S=document.querySelector("#todo-list");E.addEventListener("change",P);M.addEventListener("click",x);q.addEventListener("click",j);N.addEventListener("click",$);O.addEventListener("click",b);window.addEventListener("load",()=>{h.value=A.toUpperCase(),h.addEventListener("change",o=>{localStorage.setItem("username",o.target.value+"!")});function n(){p<10&&(p="0"+p),y<10&&(y="0"+y);var o=I+"-"+p+"-"+y;document.getElementById("due-date-input").setAttribute("min",o)}n(),k.addEventListener("submit",e);function e(o){o.preventDefault();const d={content:o.target.elements.content.value,dueDate:o.target.elements.dueDate.value,category:o.target.elements.category.value,done:!1,createdAt:new Date().getTime()};t.push(d),localStorage.setItem("todos",JSON.stringify(t)),o.target.reset(),T(),s(t),a(t)}s(t),a(t)});function T(){t.sort((n,e)=>n.done>e.done)}function B(){t.sort((n,e)=>n.dueDate>e.dueDate)}function H(){t.sort((n,e)=>n.createdAt>e.createdAt)}function J(){t.sort((n,e)=>n.content.toLowerCase()>e.content.toLowerCase())}function F(){t.sort((n,e)=>n.category>e.category)}function P(){const n=E.value;n==="name"?J():n==="added-date"?H():n==="due-date"?B():n==="category"&&F(),s(t)}function s(n){S.innerHTML="",n.forEach(e=>{const o=document.createElement("div");o.classList.add("todo-item");const d=document.createElement("label"),c=document.createElement("input"),r=document.createElement("div"),i=document.createElement("div"),l=document.createElement("div"),m=document.createElement("div"),f=document.createElement("button"),g=document.createElement("button");c.type="checkbox",c.checked=e.done,e.category=="personal"&&(l.innerHTML='<img src="public/icon-personal.png"/>'),e.category=="kids"&&(l.innerHTML='<img src="public/icon-kids.png"/>'),e.category=="job"&&(l.innerHTML='<img src="public/icon-job.png"/>'),e.category=="other"&&(l.innerHTML='<img src="public/icon-other.png"/>'),r.classList.add("todo-content"),i.classList.add("duedate-div"),l.classList.add("category-icon"),m.classList.add("actions"),f.classList.add("edit"),g.classList.add("delete"),i.innerHTML=e.dueDate,r.innerHTML=`<input type="text" value="${e.content}" readonly>`,f.innerHTML="Edit",g.innerHTML="Delete",d.appendChild(c),o.appendChild(d),o.appendChild(r),o.appendChild(i),o.appendChild(l),o.appendChild(m),m.appendChild(f),m.appendChild(g),S.appendChild(o),c.addEventListener("click",L=>{e.done=L.target.checked,T(),s(t),localStorage.setItem("todos",JSON.stringify(t)),e.done?o.classList.add("done"):o.classList.remove("done")}),f.addEventListener("click",D);function D(L){const u=r.querySelector("input");u.removeAttribute("readonly"),u.focus(),u.addEventListener("blur",w=>{u.setAttribute("readonly",!0),e.content=w.target.value,localStorage.setItem("todos",JSON.stringify(t))})}g.addEventListener("click",C);function C(L){t=t.filter(u=>u!=e),localStorage.setItem("todos",JSON.stringify(t)),s(t),a(t)}})}function $(){s(t),a(t)}function j(){const n=t.filter(e=>e.done==!1);s(n),a(n)}function x(){const n=t.filter(e=>e.done==!0);s(n),a(n)}function a(n){const e=document.querySelector("#items-left"),o=n.length===1?"todo":"todos";e.innerHTML=`${n.length} ${o}`}function b(){t=[],localStorage.setItem("todos",JSON.stringify(t)),s(t),a(t)}console.log(b);console.table(t);
