(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))s(c);new MutationObserver(c=>{for(const r of c)if(r.type==="childList")for(const d of r.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&s(d)}).observe(document,{childList:!0,subtree:!0});function n(c){const r={};return c.integrity&&(r.integrity=c.integrity),c.referrerpolicy&&(r.referrerPolicy=c.referrerpolicy),c.crossorigin==="use-credentials"?r.credentials="include":c.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(c){if(c.ep)return;c.ep=!0;const r=n(c);fetch(c.href,r)}})();let o=JSON.parse(localStorage.getItem("todos"))||[];const C=document.querySelector("#new-todo-form"),h=document.querySelector("#name"),M=localStorage.getItem("username")||"",v=new Date,g=v.getMonth()+1,k=v.getUTCFullYear()-0,y=v.getDate(),w=document.querySelector("#completed");w.addEventListener("click",P);const I=document.querySelector("#active");I.addEventListener("click",F);const q=document.querySelector("#all");q.addEventListener("click",J);const E=document.querySelector("#todo-list");window.addEventListener("load",()=>{h.value=M.toUpperCase(),h.addEventListener("change",n=>{localStorage.setItem("username",n.target.value+"!")});function t(){g<10&&(g="0"+g),y<10&&(y="0"+y);var n=k+"-"+g+"-"+y;document.getElementById("due-date-input").setAttribute("min",n)}t(),C.addEventListener("submit",e);function e(n){n.preventDefault();const s={content:n.target.elements.content.value,dueDate:n.target.elements.dueDate.value,category:n.target.elements.category.value,done:!1,createdAt:new Date().getTime()};o.push(s),localStorage.setItem("todos",JSON.stringify(o)),n.target.reset(),i(o),u(o)}i(o),u(o)});function H(){o.sort((t,e)=>t.dueDate>e.dueDate)}function N(){o.sort((t,e)=>t.createdAt>e.createdAt)}function A(){o.sort((t,e)=>t.content>e.content)}function B(){o.sort((t,e)=>t.category>e.category)}const S=document.querySelector("#sort");S.addEventListener("change",O);function O(){const t=S.value;t==="name"?A():t==="added-date"?N():t==="due-date"?H():t==="category"&&B(),i(o)}function i(t){E.innerHTML="",t.forEach(e=>{const n=document.createElement("div");n.classList.add("todo-item");const s=document.createElement("label"),c=document.createElement("input"),r=document.createElement("div"),d=document.createElement("div"),a=document.createElement("div"),m=document.createElement("div"),f=document.createElement("button"),p=document.createElement("button");c.type="checkbox",c.checked=e.done,e.category=="personal"&&(a.innerHTML='<img src="public/icon-personal.png"/>'),e.category=="kids"&&(a.innerHTML='<img src="public/icon-kids.png"/>'),e.category=="job"&&(a.innerHTML='<img src="public/icon-job.png"/>'),e.category=="other"&&(a.innerHTML='<img src="public/icon-other.png"/>'),r.classList.add("todo-content"),d.classList.add("duedate-div"),a.classList.add("category-icon"),m.classList.add("actions"),f.classList.add("edit"),p.classList.add("delete"),d.innerHTML=e.dueDate,r.innerHTML=`<input type="text" value="${e.content}" readonly>`,f.innerHTML="Edit",p.innerHTML="Delete",s.appendChild(c),n.appendChild(s),n.appendChild(r),n.appendChild(d),n.appendChild(a),n.appendChild(m),m.appendChild(f),m.appendChild(p),E.appendChild(n),e.done&&n.classList.add("done"),c.addEventListener("click",L=>{e.done=L.target.checked,localStorage.setItem("todos",JSON.stringify(o)),e.done?n.classList.add("done"):n.classList.remove("done")}),f.addEventListener("click",T);function T(L){const l=r.querySelector("input");l.removeAttribute("readonly"),l.focus(),l.addEventListener("blur",D=>{l.setAttribute("readonly",!0),e.content=D.target.value,localStorage.setItem("todos",JSON.stringify(o))})}p.addEventListener("click",b);function b(L){o=o.filter(l=>l!=e),localStorage.setItem("todos",JSON.stringify(o)),i(o),u(o)}})}function J(){i(o),u(o)}function F(){const t=o.filter(e=>e.done==!1);i(t),u(t)}function P(){const t=o.filter(e=>e.done==!0);i(t),u(t)}function u(t){const e=document.querySelector("#items-left"),n=t.length===1?"todo":"todos";e.innerHTML=`${t.length} ${n}`}console.table(o);
