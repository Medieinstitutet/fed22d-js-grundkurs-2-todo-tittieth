(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))u(o);new MutationObserver(o=>{for(const r of o)if(r.type==="childList")for(const s of r.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&u(s)}).observe(document,{childList:!0,subtree:!0});function c(o){const r={};return o.integrity&&(r.integrity=o.integrity),o.referrerpolicy&&(r.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?r.credentials="include":o.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function u(o){if(o.ep)return;o.ep=!0;const r=c(o);fetch(o.href,r)}})();let n=JSON.parse(localStorage.getItem("todos"))||[];const T=document.querySelector("#new-todo-form"),y=document.querySelector("#name"),b=localStorage.getItem("username")||"",D=document.querySelector("#completed");D.addEventListener("click",A);const C=document.querySelector("#active");C.addEventListener("click",O);const k=document.querySelector("#all");k.addEventListener("click",N);const L=document.querySelector("#todo-list");window.addEventListener("load",()=>{y.value=b.toUpperCase(),y.addEventListener("change",e=>{localStorage.setItem("username",e.target.value+"!")}),T.addEventListener("submit",t);function t(e){e.preventDefault();const c={content:e.target.elements.content.value,dueDate:e.target.elements.dueDate.value,category:e.target.elements.category.value,done:!1,createdAt:new Date().getTime()};n.push(c),localStorage.setItem("todos",JSON.stringify(n)),e.target.reset(),d(n),l(n)}d(n),l(n)});function M(){n.sort((t,e)=>t.dueDate>e.dueDate)}function q(){n.sort((t,e)=>t.createdAt>e.createdAt)}function w(){n.sort((t,e)=>t.content>e.content)}function H(){n.sort((t,e)=>t.category>e.category)}const v=document.querySelector("#sort");v.addEventListener("change",I);function I(){const t=v.value;t==="name"?w():t==="added-date"?q():t==="due-date"?M():t==="category"&&H(),d(n)}function d(t){L.innerHTML="",t.forEach(e=>{const c=document.createElement("div");c.classList.add("todo-item");const u=document.createElement("label"),o=document.createElement("input"),r=document.createElement("div"),s=document.createElement("div"),i=document.createElement("div"),m=document.createElement("div"),f=document.createElement("button"),p=document.createElement("button");o.type="checkbox",o.checked=e.done,e.category=="personal"&&(i.innerHTML='<img src="public/icon-personal.png"/>'),e.category=="kids"&&(i.innerHTML='<img src="public/icon-kids.png"/>'),e.category=="job"&&(i.innerHTML='<img src="public/icon-job.png"/>'),e.category=="other"&&(i.innerHTML='<img src="public/icon-other.png"/>'),r.classList.add("todo-content"),s.classList.add("duedate-div"),i.classList.add("category-icon"),m.classList.add("actions"),f.classList.add("edit"),p.classList.add("delete"),s.innerHTML=e.dueDate,r.innerHTML=`<input type="text" value="${e.content}" readonly>`,f.innerHTML="Edit",p.innerHTML="Delete",u.appendChild(o),c.appendChild(u),c.appendChild(r),c.appendChild(s),c.appendChild(i),c.appendChild(m),m.appendChild(f),m.appendChild(p),L.appendChild(c),e.done&&c.classList.add("done"),o.addEventListener("click",g=>{e.done=g.target.checked,localStorage.setItem("todos",JSON.stringify(n)),e.done?c.classList.add("done"):c.classList.remove("done")}),f.addEventListener("click",h);function h(g){const a=r.querySelector("input");a.removeAttribute("readonly"),a.focus(),a.addEventListener("blur",E=>{a.setAttribute("readonly",!0),e.content=E.target.value,localStorage.setItem("todos",JSON.stringify(n))})}p.addEventListener("click",S);function S(g){n=n.filter(a=>a!=e),localStorage.setItem("todos",JSON.stringify(n)),d(n),l(n)}})}function N(){d(n),l(n)}function O(){const t=n.filter(e=>e.done==!1);d(t),l(t)}function A(){const t=n.filter(e=>e.done==!0);d(t),l(t)}function l(t){const e=document.querySelector("#items-left"),c=t.length===1?"todo":"todos";e.innerHTML=`${t.length} ${c}`}console.table(n);
