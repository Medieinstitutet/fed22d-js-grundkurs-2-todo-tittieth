(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const c of n)if(c.type==="childList")for(const i of c.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function d(n){const c={};return n.integrity&&(c.integrity=n.integrity),n.referrerpolicy&&(c.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?c.credentials="include":n.crossorigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function r(n){if(n.ep)return;n.ep=!0;const c=d(n);fetch(n.href,c)}})();let o=JSON.parse(localStorage.getItem("todos"))||[];const b=document.querySelector("#new-todo-form"),v=document.querySelector("#name"),T=localStorage.getItem("username")||"",S=o.filter(t=>t.done==!0);window.addEventListener("load",()=>{v.value=T.toUpperCase(),v.addEventListener("change",e=>{localStorage.setItem("username",e.target.value+"!")}),b.addEventListener("submit",t);function t(e){e.preventDefault();const d={content:e.target.elements.content.value,dueDate:e.target.elements.dueDate.value,category:e.target.elements.category.value,done:!1,createdAt:new Date().getTime()};o.push(d),localStorage.setItem("todos",JSON.stringify(o)),e.target.reset(),p(),g(o)}p(),g(o)});const C=document.querySelector("#completed");C.addEventListener("click",M);const y=document.querySelector("#todo-list");function p(){y.innerHTML="",o.forEach(t=>{const e=document.createElement("div");e.classList.add("todo-item");const d=document.createElement("label"),r=document.createElement("input"),n=document.createElement("div"),c=document.createElement("div"),i=document.createElement("div"),s=document.createElement("div"),l=document.createElement("button"),u=document.createElement("button");r.type="checkbox",r.checked=t.done,t.category=="personal"&&(i.innerHTML='<img src="public/icon-personal.png"/>'),t.category=="kids"&&(i.innerHTML='<img src="public/icon-kids.png"/>'),t.category=="job"&&(i.innerHTML='<img src="public/icon-job.png"/>'),t.category=="other"&&(i.innerHTML='<img src="public/icon-other.png"/>'),n.classList.add("todo-content"),c.classList.add("duedate-div"),i.classList.add("category-icon"),s.classList.add("actions"),l.classList.add("edit"),u.classList.add("delete"),c.innerHTML=t.dueDate,n.innerHTML=`<input type="text" value="${t.content}" readonly>`,l.innerHTML="Edit",u.innerHTML="Delete",d.appendChild(r),e.appendChild(d),e.appendChild(n),e.appendChild(c),e.appendChild(i),e.appendChild(s),s.appendChild(l),s.appendChild(u),y.appendChild(e),t.done&&e.classList.add("done"),r.addEventListener("click",L=>{t.done=L.target.checked,localStorage.setItem("todos",JSON.stringify(o)),t.done?e.classList.add("done"):e.classList.remove("done"),p(),g(o)}),l.addEventListener("click",f);function f(L){const a=n.querySelector("input");a.removeAttribute("readonly"),a.focus(),a.addEventListener("blur",m=>{a.setAttribute("readonly",!0),t.content=m.target.value,localStorage.setItem("todos",JSON.stringify(o)),p()})}u.addEventListener("click",h);function h(L){o=o.filter(a=>a!=t),localStorage.setItem("todos",JSON.stringify(o)),p(),g(o)}})}function M(){const t=o.filter(e=>e.done==!0);y.innerHTML="",t.forEach(e=>{const d=document.createElement("div");d.classList.add("todo-item");const r=document.createElement("label"),n=document.createElement("input"),c=document.createElement("div"),i=document.createElement("div"),s=document.createElement("div"),l=document.createElement("div"),u=document.createElement("button"),f=document.createElement("button");n.type="checkbox",n.checked=e.done,e.category=="personal"&&(s.innerHTML='<img src="public/icon-personal.png"/>'),e.category=="kids"&&(s.innerHTML='<img src="public/icon-kids.png"/>'),e.category=="job"&&(s.innerHTML='<img src="public/icon-job.png"/>'),e.category=="other"&&(s.innerHTML='<img src="public/icon-other.png"/>'),c.classList.add("todo-content"),i.classList.add("duedate-div"),s.classList.add("category-icon"),l.classList.add("actions"),u.classList.add("edit"),f.classList.add("delete"),i.innerHTML=e.dueDate,c.innerHTML=`<input type="text" value="${e.content}" readonly>`,u.innerHTML="Edit",f.innerHTML="Delete",r.appendChild(n),d.appendChild(r),d.appendChild(c),d.appendChild(i),d.appendChild(s),d.appendChild(l),l.appendChild(u),l.appendChild(f),y.appendChild(d),e.done&&d.classList.add("done"),n.addEventListener("click",a=>{e.done=a.target.checked,localStorage.setItem("todos",JSON.stringify(o)),e.done?d.classList.add("done"):d.classList.remove("done"),p(),g(t)}),u.addEventListener("click",h);function h(a){const m=c.querySelector("input");m.removeAttribute("readonly"),m.focus(),m.addEventListener("blur",E=>{m.setAttribute("readonly",!0),e.content=E.target.value,localStorage.setItem("todos",JSON.stringify(o)),p()})}f.addEventListener("click",L);function L(a){o=o.filter(m=>m!=e),localStorage.setItem("todos",JSON.stringify(o)),p(),g(t)}}),g(t)}function g(t){const e=document.querySelector("#items-left"),d=t.length===1?"todo":"todos";e.innerHTML=`${t.length} ${d}`}g(o);console.table(S);console.table(o);
