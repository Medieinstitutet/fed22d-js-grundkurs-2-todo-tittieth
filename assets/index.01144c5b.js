(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))u(o);new MutationObserver(o=>{for(const c of o)if(c.type==="childList")for(const d of c.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&u(d)}).observe(document,{childList:!0,subtree:!0});function r(o){const c={};return o.integrity&&(c.integrity=o.integrity),o.referrerpolicy&&(c.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?c.credentials="include":o.crossorigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function u(o){if(o.ep)return;o.ep=!0;const c=r(o);fetch(o.href,c)}})();let n=JSON.parse(localStorage.getItem("todos"))||[];const w=document.querySelector("#new-todo-form"),D=document.querySelector("#name"),A=localStorage.getItem("username")||"",s=new Date,k=s.getUTCFullYear(),q=s.getMonth()+1,B=s.getDate(),E=document.querySelector("#sort"),I=document.querySelector("#completed"),M=document.querySelector("#active"),N=document.querySelector("#all"),O=document.querySelector("#clear-all"),h=document.querySelector("#todo-list"),$=`${k}-${q}-${B}`;D.value=A;D.addEventListener("change",t=>{localStorage.setItem("username",`${t.target.value}!`)});function H(){document.querySelector("#due-date-input").setAttribute("min",$)}function i(t){const e=document.querySelector("#items-left"),r=t.length===1?"todo":"todos";e.innerHTML=`${t.length} ${r}`}function F(){n.sort((t,e)=>t.done<e.done?-1:t.done>e.done?1:0)}function m(){localStorage.setItem("todos",JSON.stringify(n))}function a(t){h.innerHTML="",t.forEach(e=>{const r=document.createElement("div");r.classList.add("todo-item");const u=document.createElement("label"),o=document.createElement("input"),c=document.createElement("div"),d=document.createElement("div"),l=document.createElement("div"),y=document.createElement("div"),g=document.createElement("button"),p=document.createElement("button");o.type="checkbox",o.checked=e.done,e.category==="personal"&&l.classList.add("category-personal"),e.category==="kids"&&l.classList.add("category-kids"),e.category==="job"&&l.classList.add("category-job"),e.category==="other"&&l.classList.add("category-other"),c.classList.add("todo-content"),d.classList.add("duedate-div"),l.classList.add("category-icon"),y.classList.add("actions"),g.classList.add("edit"),p.classList.add("delete");const v=new Date(e.dueDate),T=new Date(s.getFullYear(),s.getMonth(),s.getDate()+5);v<s?r.classList.add("deadline-passed"):v<=T&&r.classList.add("deadline-soon"),d.innerHTML=e.dueDate,c.innerHTML=`<input type="text" value="${e.content}" maxlength="25" readonly>`,g.innerHTML="Edit",p.innerHTML="Delete",u.appendChild(o),r.appendChild(u),r.appendChild(c),r.appendChild(d),r.appendChild(l),r.appendChild(y),y.appendChild(g),y.appendChild(p),h.appendChild(r),e.done&&(r.classList.add("done"),r.classList.remove("deadline-soon"),r.classList.remove("deadline-passed")),o.addEventListener("click",f=>{e.done=f.target.checked,e.done?r.classList.add("done"):r.classList.remove("done"),F(),a(n),m()});const L=c.querySelector("input");function S(){L.removeAttribute("readonly"),L.focus()}function b(f){L.setAttribute("readonly",!0),e.content=f.target.value,m()}g.addEventListener("click",S),L.addEventListener("blur",b);function C(){n=n.filter(f=>f!==e),m(),a(n),i(n)}p.addEventListener("click",C)})}function x(t){t.preventDefault();const e={content:t.target.elements.content.value,dueDate:t.target.elements.dueDate.value,category:t.target.elements.category.value,done:!1,createdAt:new Date().getTime()};n.push(e),m(),t.target.reset(),a(n),i(n)}a(n);i(n);function P(){n.sort((t,e)=>t.dueDate<e.dueDate?-1:t.dueDate>e.dueDate?1:0)}function j(){n.sort((t,e)=>t.createdAt<e.createdAt?-1:t.createdAt>e.createdAt?1:0)}function J(){n.sort((t,e)=>t.content.toLowerCase()<e.content.toLowerCase()?-1:t.content.toLowerCase()>e.content.toLowerCase()?1:0)}function Y(){n.sort((t,e)=>t.category<e.category?-1:t.category>e.category?1:0)}function K(){const t=E.value;t==="name"?J():t==="added-date"?j():t==="due-date"?P():t==="category"&&Y(),a(n)}function U(){a(n),i(n)}function V(){const t=n.filter(e=>e.done===!1);a(t),i(t)}function z(){const t=n.filter(e=>e.done===!0);a(t),i(t)}function G(){n=[],m(),a(n),i(n)}w.addEventListener("submit",x);E.addEventListener("change",K);I.addEventListener("click",z);M.addEventListener("click",V);N.addEventListener("click",U);O.addEventListener("click",G);H();
