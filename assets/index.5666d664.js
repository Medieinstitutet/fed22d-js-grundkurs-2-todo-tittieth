(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))d(r);new MutationObserver(r=>{for(const c of r)if(c.type==="childList")for(const i of c.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&d(i)}).observe(document,{childList:!0,subtree:!0});function o(r){const c={};return r.integrity&&(c.integrity=r.integrity),r.referrerpolicy&&(c.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?c.credentials="include":r.crossorigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function d(r){if(r.ep)return;r.ep=!0;const c=o(r);fetch(r.href,c)}})();let n=JSON.parse(localStorage.getItem("todos"))||[];const w=document.querySelector("#new-todo-form"),h=document.querySelector("#name"),M=localStorage.getItem("username")||"",v=new Date,g=v.getMonth()+1,k=v.getUTCFullYear()-0,y=v.getDate(),T=document.querySelector("#sort"),I=document.querySelector("#completed"),q=document.querySelector("#active"),A=document.querySelector("#all"),E=document.querySelector("#todo-list");T.addEventListener("change",J);I.addEventListener("click",$);q.addEventListener("click",P);A.addEventListener("click",F);window.addEventListener("load",()=>{h.value=M.toUpperCase(),h.addEventListener("change",o=>{localStorage.setItem("username",o.target.value+"!")});function t(){g<10&&(g="0"+g),y<10&&(y="0"+y);var o=k+"-"+g+"-"+y;document.getElementById("due-date-input").setAttribute("min",o)}t(),w.addEventListener("submit",e);function e(o){o.preventDefault();const d={content:o.target.elements.content.value,dueDate:o.target.elements.dueDate.value,category:o.target.elements.category.value,done:!1,createdAt:new Date().getTime()};n.push(d),localStorage.setItem("todos",JSON.stringify(n)),o.target.reset(),S(),s(n),u(n)}s(n),u(n)});function S(){n.sort((t,e)=>t.done>e.done)}function H(){n.sort((t,e)=>t.dueDate>e.dueDate)}function N(){n.sort((t,e)=>t.createdAt>e.createdAt)}function O(){n.sort((t,e)=>t.content.toLowerCase()>e.content.toLowerCase())}function B(){n.sort((t,e)=>t.category>e.category)}function J(){const t=T.value;t==="name"?O():t==="added-date"?N():t==="due-date"?H():t==="category"&&B(),s(n)}function s(t){E.innerHTML="",t.forEach(e=>{const o=document.createElement("div");o.classList.add("todo-item");const d=document.createElement("label"),r=document.createElement("input"),c=document.createElement("div"),i=document.createElement("div"),a=document.createElement("div"),m=document.createElement("div"),f=document.createElement("button"),p=document.createElement("button");r.type="checkbox",r.checked=e.done,e.category=="personal"&&(a.innerHTML='<img src="public/icon-personal.png"/>'),e.category=="kids"&&(a.innerHTML='<img src="public/icon-kids.png"/>'),e.category=="job"&&(a.innerHTML='<img src="public/icon-job.png"/>'),e.category=="other"&&(a.innerHTML='<img src="public/icon-other.png"/>'),c.classList.add("todo-content"),i.classList.add("duedate-div"),a.classList.add("category-icon"),m.classList.add("actions"),f.classList.add("edit"),p.classList.add("delete"),i.innerHTML=e.dueDate,c.innerHTML=`<input type="text" value="${e.content}" readonly>`,f.innerHTML="Edit",p.innerHTML="Delete",d.appendChild(r),o.appendChild(d),o.appendChild(c),o.appendChild(i),o.appendChild(a),o.appendChild(m),m.appendChild(f),m.appendChild(p),E.appendChild(o),r.addEventListener("click",L=>{e.done=L.target.checked,S(),s(n),localStorage.setItem("todos",JSON.stringify(n)),e.done?o.classList.add("done"):o.classList.remove("done")}),f.addEventListener("click",b);function b(L){const l=c.querySelector("input");l.removeAttribute("readonly"),l.focus(),l.addEventListener("blur",C=>{l.setAttribute("readonly",!0),e.content=C.target.value,localStorage.setItem("todos",JSON.stringify(n))})}p.addEventListener("click",D);function D(L){n=n.filter(l=>l!=e),localStorage.setItem("todos",JSON.stringify(n)),s(n),u(n)}})}function F(){s(n),u(n)}function P(){const t=n.filter(e=>e.done==!1);s(t),u(t)}function $(){const t=n.filter(e=>e.done==!0);s(t),u(t)}function u(t){const e=document.querySelector("#items-left"),o=t.length===1?"todo":"todos";e.innerHTML=`${t.length} ${o}`}console.table(n);
