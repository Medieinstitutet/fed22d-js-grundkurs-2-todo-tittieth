(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))a(r);new MutationObserver(r=>{for(const c of r)if(c.type==="childList")for(const s of c.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&a(s)}).observe(document,{childList:!0,subtree:!0});function o(r){const c={};return r.integrity&&(c.integrity=r.integrity),r.referrerpolicy&&(c.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?c.credentials="include":r.crossorigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function a(r){if(r.ep)return;r.ep=!0;const c=o(r);fetch(r.href,c)}})();let n=JSON.parse(localStorage.getItem("todos"))||[];const A=document.querySelector("#new-todo-form"),S=document.querySelector("#name"),k=localStorage.getItem("username")||"",v=new Date,p=v.getMonth()+1,I=v.getUTCFullYear()-0,y=v.getDate(),h=document.querySelector("#sort"),M=document.querySelector("#completed"),q=document.querySelector("#active"),N=document.querySelector("#all"),O=document.querySelector("#clear-all"),E=document.querySelector("#todo-list"),B=I+"-"+p+"-"+y;h.addEventListener("change",b);M.addEventListener("click",x);q.addEventListener("click",j);N.addEventListener("click",$);O.addEventListener("click",U);window.addEventListener("load",()=>{S.value=k.toUpperCase(),S.addEventListener("change",o=>{localStorage.setItem("username",o.target.value+"!")});function t(){p<10&&(p="0"+p),y<10&&(y="0"+y),document.getElementById("due-date-input").setAttribute("min",B)}t(),A.addEventListener("submit",e);function e(o){o.preventDefault();const a={content:o.target.elements.content.value,dueDate:o.target.elements.dueDate.value,category:o.target.elements.category.value,done:!1,createdAt:new Date().getTime()};n.push(a),localStorage.setItem("todos",JSON.stringify(n)),o.target.reset(),T(),i(n),d(n)}i(n),d(n)});function T(){n.sort((t,e)=>t.done<e.done?-1:t.done>e.done?1:0)}function H(){n.sort((t,e)=>t.dueDate<e.dueDate?-1:t.dueDate>e.dueDate?1:0)}function J(){n.sort((t,e)=>t.createdAt<e.createdAt?-1:t.createdAt>e.createdAt?1:0)}function F(){n.sort((t,e)=>t.content.toLowerCase()<e.content.toLowerCase()?-1:t.content.toLowerCase()>e.content.toLowerCase()?1:0)}function P(){n.sort((t,e)=>t.category<e.category?-1:t.category>e.category?1:0)}function b(){const t=h.value;t==="name"?F():t==="added-date"?J():t==="due-date"?H():t==="category"&&P(),i(n)}console.log(h);console.log(b);function i(t){E.innerHTML="",t.forEach(e=>{const o=document.createElement("div");o.classList.add("todo-item");const a=document.createElement("label"),r=document.createElement("input"),c=document.createElement("div"),s=document.createElement("div"),l=document.createElement("div"),m=document.createElement("div"),f=document.createElement("button"),g=document.createElement("button");r.type="checkbox",r.checked=e.done,e.category=="personal"&&(l.innerHTML='<img src="public/icon-personal.png"/>'),e.category=="kids"&&(l.innerHTML='<img src="public/icon-kids.png"/>'),e.category=="job"&&(l.innerHTML='<img src="public/icon-job.png"/>'),e.category=="other"&&(l.innerHTML='<img src="public/icon-other.png"/>'),c.classList.add("todo-content"),s.classList.add("duedate-div"),l.classList.add("category-icon"),m.classList.add("actions"),f.classList.add("edit"),g.classList.add("delete"),s.innerHTML=e.dueDate,c.innerHTML=`<input type="text" value="${e.content}" readonly>`,f.innerHTML="Edit",g.innerHTML="Delete",a.appendChild(r),o.appendChild(a),o.appendChild(c),o.appendChild(s),o.appendChild(l),o.appendChild(m),m.appendChild(f),m.appendChild(g),E.appendChild(o),r.addEventListener("click",L=>{e.done=L.target.checked,T(),i(n),localStorage.setItem("todos",JSON.stringify(n)),e.done?o.classList.add("done"):o.classList.remove("done")}),f.addEventListener("click",D);function D(L){const u=c.querySelector("input");u.removeAttribute("readonly"),u.focus(),u.addEventListener("blur",w=>{u.setAttribute("readonly",!0),e.content=w.target.value,localStorage.setItem("todos",JSON.stringify(n))})}g.addEventListener("click",C);function C(L){n=n.filter(u=>u!=e),localStorage.setItem("todos",JSON.stringify(n)),i(n),d(n)}})}function $(){i(n),d(n)}function j(){const t=n.filter(e=>e.done==!1);i(t),d(t)}function x(){const t=n.filter(e=>e.done==!0);i(t),d(t)}function d(t){const e=document.querySelector("#items-left"),o=t.length===1?"todo":"todos";e.innerHTML=`${t.length} ${o}`}function U(){n=[],localStorage.setItem("todos",JSON.stringify(n)),i(n),d(n)}console.table(n);
